{"ast":null,"code":"var _jsxFileName = \"/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/LoanPayment.js\";\nimport React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../redux/actions/loanActions';\n\nconst mapStateToProps = ({\n  errors\n}) => ({\n  errors\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: bindActionCreators(loanActions, dispatch)\n});\n\nconst LoanPayment = ({\n  actions,\n  errors,\n  history\n}) => {\n  const auth = localStorage.getItem('jwt');\n  const [showError, setShowError] = useState(false);\n  const [amount, setAmount] = useState(50);\n\n  const handleChange = e => {\n    setAmount(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const pay = async () => {\n      const payment = await actions.repayLoan({\n        repaymentAmount: amount,\n        loanId: auth.loan[0]\n      });\n\n      if (payment.loan) {\n        history.push('/loanRepaymentHistory');\n        return window.location.reload();\n      }\n\n      setShowError(true);\n    };\n\n    pay();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loan-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, \"Repay loan\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  }, showError && errors), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"amount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 15\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    min: \"50\",\n    max: \"55000\",\n    id: \"amount\",\n    name: \"amount\",\n    value: amount,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"output\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }, \"ksh. \" + amount)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }, \"Repay\")))));\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoanPayment));","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/LoanPayment.js"],"names":["React","useState","withRouter","connect","bindActionCreators","loanActions","mapStateToProps","errors","mapDispatchToProps","dispatch","actions","LoanPayment","history","auth","localStorage","getItem","showError","setShowError","amount","setAmount","handleChange","e","target","value","handleSubmit","preventDefault","pay","payment","repayLoan","repaymentAmount","loanId","loan","push","window","location","reload"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../redux/actions/loanActions';\n\nconst mapStateToProps = ({ errors }) => ({ errors });\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(loanActions, dispatch)\n});\n\nconst LoanPayment = ({ actions, errors, history }) => {\n  const auth = localStorage.getItem('jwt')\n  const [showError, setShowError] = useState(false);\n    const [amount, setAmount] = useState(50);\n\n    const handleChange = e => {\n        setAmount(e.target.value);\n    }\n\n    const handleSubmit = e => {\n        e.preventDefault()\n      const pay = async () => {\n        const payment = await actions.repayLoan({ repaymentAmount: amount, loanId: auth.loan[0] })\n        if (payment.loan) {\n          history.push('/loanRepaymentHistory')\n          return window.location.reload();\n        }\n        setShowError(true)\n      }\n      pay();\n    }\n    return (\n      <>\n        <div className=\"loan-form\">\n          <header>\n            <h1>Repay loan</h1>\n          </header>\n          <div className='error'>{showError && errors}</div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-row\">\n              <label htmlFor=\"amount\">Amount</label>\n              <input\n                type=\"number\"\n                min=\"50\"\n                max=\"55000\"\n                id=\"amount\"\n                name=\"amount\"\n                value={amount}\n                onChange={handleChange}\n              />\n              <output>{\"ksh. \" + amount}</output>\n            </div>\n            <div className=\"form-row\">\n              <button>Repay</button>\n            </div>\n          </form>\n        </div>\n      </>\n    );\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoanPayment));"]},"metadata":{},"sourceType":"module"}