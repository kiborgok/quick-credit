{"ast":null,"code":"import * as userApi from '../../api/userApi';\nimport * as types from './actionTypes';\nexport const receiveErrors = error => ({\n  type: types.RECEIVE_ERRORS,\n  error: error.error\n});\nexport const signUpUserSuccess = user => ({\n  type: types.SIGN_UP_USER_SUCCESS,\n  user: user.data\n});\nexport const signInUserSuccess = user => ({\n  type: types.SIGN_IN_USER_SUCCESS,\n  user: user.data\n});\nexport const loadUsersSuccess = users => ({\n  type: types.LOAD_USERS_SUCCESS,\n  users: users.data\n});\nexport const loadUserSuccess = user => ({\n  type: types.LOAD_USER_SUCCESS,\n  user: user.data\n});\nexport const verifyUserSuccess = user => ({\n  type: types.VERIFY_USER_SUCCESS,\n  user: user.data\n});\nexport function loadUsers() {\n  return function (dispatch) {\n    return userApi.loadUsers().then(users => {\n      if (users.data) return dispatch(loadUsersSuccess(users));\n      return dispatch(receiveErrors(users));\n    }).catch(error => {\n      alert(`Network Error ${error}`);\n    });\n  };\n}\n;\nexport function loadUser() {\n  return function (dispatch) {\n    return userApi.loadUser().then(user => {\n      if (user.data) return dispatch(loadUserSuccess(user));\n      return dispatch(receiveErrors(user));\n    });\n  };\n}\n;\nexport function verifyUser() {\n  return function (dispatch) {\n    return userApi.verifyUser().then(user => {\n      if (user.data) {\n        alert('You have successfully verified your account');\n        return dispatch(verifyUserSuccess(user));\n      }\n\n      alert('There was a problem: ' + user.error);\n      return dispatch(receiveErrors(user));\n    });\n  };\n}\n;\nexport function signup(user) {\n  return function (dispatch) {\n    return userApi.signup(user).then(user => {\n      if (user.data) {\n        localStorage.setItem('verificationToken', user.data.verificationToken);\n        localStorage.setItem('email', user.data.email);\n        alert('Check mail to verify your account');\n        return dispatch(signInUserSuccess(user));\n      }\n\n      return dispatch(receiveErrors(user));\n    });\n  };\n}\n;\nexport const signin = user => dispatch => userApi.signin(user).then(user => {\n  if (user.data) {\n    if (user.data.loan[0]) {\n      localStorage.setItem('token', user.data.token);\n      localStorage.setItem('username', user.data.username);\n      localStorage.setItem('userId', user.data.userId);\n      localStorage.setItem('user', user.data.admin);\n      localStorage.setItem('userStatus', user.data.status);\n      localStorage.setItem('loanStatus', user.data.loan[0].status);\n      localStorage.setItem('loanId', user.data.loan[0]._id);\n      return dispatch(signInUserSuccess(user));\n    } else {\n      localStorage.setItem('token', user.data.token);\n      localStorage.setItem('username', user.data.username);\n      localStorage.setItem('userId', user.data.userId);\n      localStorage.setItem('user', user.data.admin);\n      localStorage.setItem('userStatus', user.data.status);\n      localStorage.setItem('loanStatus', 'No loan');\n      return dispatch(signInUserSuccess(user));\n    }\n  }\n\n  return dispatch(receiveErrors(user));\n});","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/redux/actions/userActions.js"],"names":["userApi","types","receiveErrors","error","type","RECEIVE_ERRORS","signUpUserSuccess","user","SIGN_UP_USER_SUCCESS","data","signInUserSuccess","SIGN_IN_USER_SUCCESS","loadUsersSuccess","users","LOAD_USERS_SUCCESS","loadUserSuccess","LOAD_USER_SUCCESS","verifyUserSuccess","VERIFY_USER_SUCCESS","loadUsers","dispatch","then","catch","alert","loadUser","verifyUser","signup","localStorage","setItem","verificationToken","email","signin","loan","token","username","userId","admin","status","_id"],"mappings":"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","sourcesContent":["import * as userApi from '../../api/userApi';\nimport * as types from './actionTypes';\n\nexport const receiveErrors = error => (\n    { type: types.RECEIVE_ERRORS, error: error.error }\n);\n\nexport const signUpUserSuccess = user => (\n    { type: types.SIGN_UP_USER_SUCCESS, user: user.data }\n);\n\nexport const signInUserSuccess = user => (\n    { type: types.SIGN_IN_USER_SUCCESS, user: user.data }\n);\n\nexport const loadUsersSuccess = users => (\n    { type: types.LOAD_USERS_SUCCESS, users: users.data }\n);\n\nexport const loadUserSuccess = user => (\n    { type: types.LOAD_USER_SUCCESS, user: user.data }\n);\n\nexport const verifyUserSuccess = user => (\n    { type: types.VERIFY_USER_SUCCESS, user: user.data }\n);\n\nexport function loadUsers() {\n    return function (dispatch) {\n        return userApi.loadUsers()\n            .then(users => {\n                if (users.data) return dispatch(loadUsersSuccess(users))\n                return dispatch(receiveErrors(users))\n            })\n            .catch(error => {\n                alert(`Network Error ${error}`)\n            })\n    };\n};\n\nexport function loadUser() {\n    return function (dispatch) {\n        return userApi.loadUser()\n            .then(user => {\n                if (user.data) return dispatch(loadUserSuccess(user))\n                return dispatch(receiveErrors(user))\n            })\n    };\n};\n\nexport function verifyUser() {\n    return function (dispatch) {\n        return userApi.verifyUser()\n            .then(user => {\n                if (user.data) {\n                    alert('You have successfully verified your account')\n                    return dispatch(verifyUserSuccess(user))\n                }\n                alert('There was a problem: ' + user.error)\n                return dispatch(receiveErrors(user))\n            })\n    };\n};\n\nexport function signup(user) {\n    return function (dispatch) {\n        return userApi.signup(user)\n            .then(user => {\n                if (user.data) {\n                    localStorage.setItem('verificationToken', user.data.verificationToken);\n                    localStorage.setItem('email', user.data.email);\n                    alert('Check mail to verify your account')\n                    return dispatch(signInUserSuccess(user))\n                }\n                return dispatch(receiveErrors(user))\n            })\n    };\n};\n\nexport const signin = user => dispatch => userApi.signin(user)\n    .then(user => {\n        if (user.data) {\n            if (user.data.loan[0]) {\n                localStorage.setItem('token', user.data.token)\n                localStorage.setItem('username', user.data.username)\n                localStorage.setItem('userId', user.data.userId)\n                localStorage.setItem('user', user.data.admin)\n                localStorage.setItem('userStatus', user.data.status)\n                localStorage.setItem('loanStatus', user.data.loan[0].status)\n                localStorage.setItem('loanId', user.data.loan[0]._id)\n                return dispatch(signInUserSuccess(user))\n            } else {\n                localStorage.setItem('token', user.data.token)\n                localStorage.setItem('username', user.data.username)\n                localStorage.setItem('userId', user.data.userId)\n                localStorage.setItem('user', user.data.admin)\n                localStorage.setItem('userStatus', user.data.status)\n                localStorage.setItem('loanStatus', 'No loan')\n                return dispatch(signInUserSuccess(user))\n            }\n        }\n        return dispatch(receiveErrors(user))\n    })\n\n\n"]},"metadata":{},"sourceType":"module"}