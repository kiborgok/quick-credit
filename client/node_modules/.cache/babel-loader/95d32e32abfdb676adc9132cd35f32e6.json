{"ast":null,"code":"var _jsxFileName = \"/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/admin/LoanApplications.js\";\nimport React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../../redux/actions/loanActions';\n\nconst mapStateToProps = ({\n  errors,\n  loans\n}) => ({\n  errors,\n  loans\n});\n\nconst mapDispatchToProps = dispatch => ({\n  actions: {\n    loadLoans: bindActionCreators(loanActions.loadLoans, dispatch),\n    approveOrRejectLoan: bindActionCreators(loanActions.approveOrRejectLoan, dispatch)\n  }\n});\n\nconst Modal = ({\n  handleClose,\n  show,\n  loan\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: show ? 'modal display-block' : 'modal display-none',\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 19,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"section\", {\n  className: \"modal-main\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }\n}, /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 13\n  }\n}, \"Loan Details\"), /*#__PURE__*/React.createElement(\"div\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 13\n  }\n}, /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 17\n  }\n}, \"Amount: \", loan.amount), /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 17\n  }\n}, \"Tenor: \", loan.tenor), /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 17\n  }\n}, \"Interest: \", loan.interest), /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 17\n  }\n}, \"monthlyInstallment: \", loan.monthlyInstallment), /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 17\n  }\n}, \"Balance: \", loan.balance), /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 17\n  }\n}, \"Repaid: \", loan.repaid === true ? 'True' : 'False'), /*#__PURE__*/React.createElement(\"h2\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 17\n  }\n}, \"Status: \", loan.status)), /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    position: 'fixed',\n    right: '0',\n    top: '0',\n    color: 'red',\n    fontWeight: 'bold',\n    fontSize: '1.5em',\n    marginRight: '15px',\n    marginTop: '15px'\n  },\n  onClick: handleClose,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 13\n  }\n}, \"X\")));\n\nconst LoanApplications = ({\n  errors,\n  loans,\n  actions\n}) => {\n  const auth = localStorage.getItem('jwt');\n  const [show, setShow] = useState(false);\n  const [loanDetails, setLoanDetails] = useState({\n    amount: null,\n    tenor: null,\n    repaid: null,\n    balance: null,\n    interest: null,\n    status: null,\n    monthlyInstallment: null\n  });\n\n  const showModal = () => setShow(true);\n\n  const hideModal = () => setShow(false);\n\n  useEffect(() => {\n    loans.length === 0 && actions.loadLoans({\n      token: auth.token\n    });\n  });\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"data-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"header\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"Loans\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, errors), /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 19\n    }\n  }, \"First Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, \"Second Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 19\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, \"Amount\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, \"Period In Months\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }, \"Balance\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }\n  }, \"Status\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, \"View Loan\"))), loans.length !== 0 ? /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, loans.map(loan => /*#__PURE__*/React.createElement(\"tr\", {\n    key: loan._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, loan.user.firstName), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, loan.user.secondName), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, loan.user.email), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  }, loan.amount), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 21\n    }\n  }, loan.tenor), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, loan.balance), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      loan.status === \"Rejected\" ? actions.approveOrRejectLoan({\n        status: \"Approved\",\n        loanId: auth.loan._id\n      }) : actions.approveOrRejectLoan({\n        status: \"Rejected\",\n        loanId: loan._id\n      });\n    },\n    className: loan.status === \"Pending\" ? \"pending\" : loan.status === \"Approved\" ? \"approved\" : \"unverified\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 23\n    }\n  }, loan.status)), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    loan: loanDetails,\n    handleClose: hideModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 23\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      setLoanDetails({\n        amount: loan.amount,\n        tenor: loan.tenor,\n        repaid: loan.repaid,\n        balance: loan.balance,\n        interest: loan.interest,\n        status: loan.status,\n        monthlyInstallment: loan.paymentInstallment\n      });\n      showModal();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 23\n    }\n  }, \"View\"))))) : /*#__PURE__*/React.createElement(\"caption\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, \"There are no loans yet\"))));\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoanApplications));","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/admin/LoanApplications.js"],"names":["React","useEffect","useState","withRouter","connect","bindActionCreators","loanActions","mapStateToProps","errors","loans","mapDispatchToProps","dispatch","actions","loadLoans","approveOrRejectLoan","Modal","handleClose","show","loan","amount","tenor","interest","monthlyInstallment","balance","repaid","status","position","right","top","color","fontWeight","fontSize","marginRight","marginTop","LoanApplications","auth","localStorage","getItem","setShow","loanDetails","setLoanDetails","showModal","hideModal","length","token","map","_id","user","firstName","secondName","email","loanId","paymentInstallment"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,OAAO,KAAKC,WAAZ,MAA6B,iCAA7B;;AAEA,MAAMC,eAAe,GAAG,CAAC;AAAEC,EAAAA,MAAF;AAAUC,EAAAA;AAAV,CAAD,MAAwB;AAC5CD,EAAAA,MAD4C;AACpCC,EAAAA;AADoC,CAAxB,CAAxB;;AAIA,MAAMC,kBAAkB,GAAGC,QAAQ,KAAK;AACpCC,EAAAA,OAAO,EAAE;AACLC,IAAAA,SAAS,EAAER,kBAAkB,CAACC,WAAW,CAACO,SAAb,EAAwBF,QAAxB,CADxB;AAELG,IAAAA,mBAAmB,EAAET,kBAAkB,CAACC,WAAW,CAACQ,mBAAb,EAAkCH,QAAlC;AAFlC;AAD2B,CAAL,CAAnC;;AAOA,MAAMI,KAAK,GAAG,CAAC;AAAEC,EAAAA,WAAF;AAAeC,EAAAA,IAAf;AAAqBC,EAAAA;AAArB,CAAD,kBACV;AAAK,EAAA,SAAS,EAAED,IAAI,GAAG,qBAAH,GAA2B,oBAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACI;AAAS,EAAA,SAAS,EAAC,YAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaC,IAAI,CAACC,MAAlB,CADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAYD,IAAI,CAACE,KAAjB,CAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAeF,IAAI,CAACG,QAApB,CAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAyBH,IAAI,CAACI,kBAA9B,CAJJ,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAAcJ,IAAI,CAACK,OAAnB,CALJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaL,IAAI,CAACM,MAAL,KAAgB,IAAhB,GAAuB,MAAvB,GAAgC,OAA7C,CANJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAaN,IAAI,CAACO,MAAlB,CAPJ,CAFJ,eAWI;AACI,EAAA,KAAK,EAAE;AACHC,IAAAA,QAAQ,EAAE,OADP;AACgBC,IAAAA,KAAK,EAAE,GADvB;AAC4BC,IAAAA,GAAG,EAAE,GADjC;AACsCC,IAAAA,KAAK,EAAE,KAD7C;AACoDC,IAAAA,UAAU,EAAE,MADhE;AACwEC,IAAAA,QAAQ,EAAE,OADlF;AAC2FC,IAAAA,WAAW,EAAE,MADxG;AACgHC,IAAAA,SAAS,EAAE;AAD3H,GADX;AAII,EAAA,OAAO,EAAEjB,WAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAXJ,CADJ,CADJ;;AAwBA,MAAMkB,gBAAgB,GAAG,CAAC;AAAE1B,EAAAA,MAAF;AAAUC,EAAAA,KAAV;AAAiBG,EAAAA;AAAjB,CAAD,KAAgC;AACvD,QAAMuB,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAb;AACE,QAAM,CAACpB,IAAD,EAAOqB,OAAP,IAAkBpC,QAAQ,CAAC,KAAD,CAAhC;AACA,QAAM,CAACqC,WAAD,EAAcC,cAAd,IAAgCtC,QAAQ,CAAC;AAC3CiB,IAAAA,MAAM,EAAE,IADmC;AAE3CC,IAAAA,KAAK,EAAE,IAFoC;AAG3CI,IAAAA,MAAM,EAAE,IAHmC;AAI3CD,IAAAA,OAAO,EAAE,IAJkC;AAK3CF,IAAAA,QAAQ,EAAE,IALiC;AAM3CI,IAAAA,MAAM,EAAE,IANmC;AAO3CH,IAAAA,kBAAkB,EAAE;AAPuB,GAAD,CAA9C;;AASA,QAAMmB,SAAS,GAAG,MAAMH,OAAO,CAAC,IAAD,CAA/B;;AACA,QAAMI,SAAS,GAAG,MAAMJ,OAAO,CAAC,KAAD,CAA/B;;AACArC,EAAAA,SAAS,CAAC,MAAM;AACXQ,IAAAA,KAAK,CAACkC,MAAN,KAAiB,CAAlB,IAAwB/B,OAAO,CAACC,SAAR,CAAkB;AAAC+B,MAAAA,KAAK,EAAET,IAAI,CAACS;AAAb,KAAlB,CAAxB;AACH,GAFQ,CAAT;AAGA,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CADF,eAIE;AAAG,IAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsBpC,MAAtB,CAJF,eAKI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBARF,CADF,CADF,EAaCC,KAAK,CAACkC,MAAN,KAAiB,CAAjB,gBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlC,KAAK,CAACoC,GAAN,CAAW3B,IAAD,iBACT;AAAI,IAAA,GAAG,EAAEA,IAAI,CAAC4B,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK5B,IAAI,CAAC6B,IAAL,CAAUC,SAAf,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK9B,IAAI,CAAC6B,IAAL,CAAUE,UAAf,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAK/B,IAAI,CAAC6B,IAAL,CAAUG,KAAf,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKhC,IAAI,CAACC,MAAV,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,IAAI,CAACE,KAAV,CALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,IAAI,CAACK,OAAV,CANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,OAAO,EAAE,MAAM;AACbL,MAAAA,IAAI,CAACO,MAAL,KAAgB,UAAhB,GACIb,OAAO,CAACE,mBAAR,CAA4B;AAC1BW,QAAAA,MAAM,EAAE,UADkB;AAE1B0B,QAAAA,MAAM,EAAEhB,IAAI,CAACjB,IAAL,CAAU4B;AAFQ,OAA5B,CADJ,GAKIlC,OAAO,CAACE,mBAAR,CAA4B;AAC1BW,QAAAA,MAAM,EAAE,UADkB;AAE1B0B,QAAAA,MAAM,EAAEjC,IAAI,CAAC4B;AAFa,OAA5B,CALJ;AASD,KAXH;AAYE,IAAA,SAAS,EACP5B,IAAI,CAACO,MAAL,KAAgB,SAAhB,GACI,SADJ,GAEIP,IAAI,CAACO,MAAL,KAAgB,UAAhB,GACA,UADA,GAEA,YAjBR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAoBGP,IAAI,CAACO,MApBR,CADF,CAPF,eA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAER,IADR;AAEE,IAAA,IAAI,EAAEsB,WAFR;AAGE,IAAA,WAAW,EAAEG,SAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME;AACE,IAAA,OAAO,EAAE,MAAM;AACbF,MAAAA,cAAc,CAAC;AACbrB,QAAAA,MAAM,EAAED,IAAI,CAACC,MADA;AAEbC,QAAAA,KAAK,EAAEF,IAAI,CAACE,KAFC;AAGbI,QAAAA,MAAM,EAAEN,IAAI,CAACM,MAHA;AAIbD,QAAAA,OAAO,EAAEL,IAAI,CAACK,OAJD;AAKbF,QAAAA,QAAQ,EAAEH,IAAI,CAACG,QALF;AAMbI,QAAAA,MAAM,EAAEP,IAAI,CAACO,MANA;AAObH,QAAAA,kBAAkB,EAAEJ,IAAI,CAACkC;AAPZ,OAAD,CAAd;AASAX,MAAAA,SAAS;AACV,KAZH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YANF,CA/BF,CADD,CADH,CADD,gBA6DK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BA1EN,CALJ,CADF,CADF;AAuFH,CAxGD;;AA0GA,eAAetC,UAAU,CAACC,OAAO,CAACG,eAAD,EAAkBG,kBAAlB,CAAP,CAA6CwB,gBAA7C,CAAD,CAAzB","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../../redux/actions/loanActions';\n\nconst mapStateToProps = ({ errors, loans }) => ({\n    errors, loans\n});\n\nconst mapDispatchToProps = dispatch => ({\n    actions: {\n        loadLoans: bindActionCreators(loanActions.loadLoans, dispatch),\n        approveOrRejectLoan: bindActionCreators(loanActions.approveOrRejectLoan, dispatch)\n    }\n});\n\nconst Modal = ({ handleClose, show, loan }) => (\n    <div className={show ? 'modal display-block' : 'modal display-none'}>\n        <section className='modal-main'>\n            <h2>Loan Details</h2>\n            <div>\n                <h2>Amount: {loan.amount}</h2>\n                <h2>Tenor: {loan.tenor}</h2>\n                <h2>Interest: {loan.interest}</h2>\n                <h2>monthlyInstallment: {loan.monthlyInstallment}</h2>\n                <h2>Balance: {loan.balance}</h2>\n                <h2>Repaid: {loan.repaid === true ? 'True' : 'False'}</h2>\n                <h2>Status: {loan.status}</h2>\n            </div>\n            <div\n                style={{\n                    position: 'fixed', right: '0', top: '0', color: 'red', fontWeight: 'bold', fontSize: '1.5em', marginRight: '15px', marginTop: '15px'\n                }}\n                onClick={handleClose}>\n                X\n            </div>\n        </section>\n    </div>\n)\n\nconst LoanApplications = ({ errors, loans, actions }) => {\n  const auth = localStorage.getItem('jwt')\n    const [show, setShow] = useState(false);\n    const [loanDetails, setLoanDetails] = useState({\n        amount: null,\n        tenor: null,\n        repaid: null,\n        balance: null,\n        interest: null,\n        status: null,\n        monthlyInstallment: null\n    });\n    const showModal = () => setShow(true)\n    const hideModal = () => setShow(false)\n    useEffect(() => {\n        (loans.length === 0) && actions.loadLoans({token: auth.token})\n    });\n    return (\n      <>\n        <div className=\"data-form\">\n          <header>\n            <h1>Loans</h1>\n          </header>\n          <p className='error'>{errors}</p>\n            <table>\n              <thead>\n                <tr>\n                  <th>First Name</th>\n                  <th>Second Name</th>\n                  <th>Email</th>\n                  <th>Amount</th>\n                  <th>Period In Months</th>\n                  <th>Balance</th>\n                  <th>Status</th>\n                  <th>View Loan</th>\n                </tr>\n            </thead>\n            {loans.length !== 0 ? (\n              <tbody>\n                {loans.map((loan) => (\n                  <tr key={loan._id}>\n                    <td>{loan.user.firstName}</td>\n                    <td>{loan.user.secondName}</td>\n                    <td>{loan.user.email}</td>\n                    <td>{loan.amount}</td>\n                    <td>{loan.tenor}</td>\n                    <td>{loan.balance}</td>\n                    <td>\n                      <button\n                        onClick={() => {\n                          loan.status === \"Rejected\"\n                            ? actions.approveOrRejectLoan({\n                                status: \"Approved\",\n                                loanId: auth.loan._id,\n                              })\n                            : actions.approveOrRejectLoan({\n                                status: \"Rejected\",\n                                loanId: loan._id,\n                              });\n                        }}\n                        className={\n                          loan.status === \"Pending\"\n                            ? \"pending\"\n                            : loan.status === \"Approved\"\n                            ? \"approved\"\n                            : \"unverified\"\n                        }\n                      >\n                        {loan.status}\n                      </button>\n                    </td>\n                    <td>\n                      <Modal\n                        show={show}\n                        loan={loanDetails}\n                        handleClose={hideModal}\n                      />\n                      <button\n                        onClick={() => {\n                          setLoanDetails({\n                            amount: loan.amount,\n                            tenor: loan.tenor,\n                            repaid: loan.repaid,\n                            balance: loan.balance,\n                            interest: loan.interest,\n                            status: loan.status,\n                            monthlyInstallment: loan.paymentInstallment,\n                          });\n                          showModal();\n                        }}\n                      >\n                        View\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n                </tbody>) : (\n                \n                  <caption>There are no loans yet</caption>\n              )}\n            </table>\n        </div>\n      </>\n    );\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoanApplications));"]},"metadata":{},"sourceType":"module"}