{"ast":null,"code":"import _regeneratorRuntime from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{withRouter}from'react-router-dom';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as loanActions from'../redux/actions/loanActions';var mapStateToProps=function mapStateToProps(_ref){var errors=_ref.errors;return{errors:errors};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{actions:bindActionCreators(loanActions,dispatch)};};var Loan=function Loan(_ref2){var errors=_ref2.errors,actions=_ref2.actions,history=_ref2.history;var initialState={amount:500,tenor:1};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),loan=_useState2[0],setLoan=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showError=_useState4[0],setShowError=_useState4[1];var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setLoan(_objectSpread(_objectSpread({},loan),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var userId=localStorage.getItem('userId');var loanObject={amount:loan.amount,tenor:loan.tenor,userId:userId};var apply=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var application;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return actions.applyLoan(loanObject);case 2:application=_context.sent;if(!application.loan){_context.next=6;break;}history.push('/loanDetails');return _context.abrupt(\"return\",window.location.reload());case 6:setShowError(true);case 7:case\"end\":return _context.stop();}}},_callee);}));return function apply(){return _ref3.apply(this,arguments);};}();apply();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"loan-form\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Apply for a loan\")),/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},showError&&errors),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"amount\"},\"Amount\"),/*#__PURE__*/React.createElement(\"input\",{type:\"range\",min:\"500\",max:\"50000\",step:\"500\",id:\"amount\",name:\"amount\",value:loan.amount,onChange:handleChange}),/*#__PURE__*/React.createElement(\"output\",null,\"ksh. \"+loan.amount)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"tenor\"},\"Period In Months\"),/*#__PURE__*/React.createElement(\"select\",{as:\"select\",id:\"tenor\",name:\"tenor\",value:loan.tenor,onChange:handleChange},/*#__PURE__*/React.createElement(\"option\",{value:1},\"1\"),/*#__PURE__*/React.createElement(\"option\",{value:3},\"3\"),/*#__PURE__*/React.createElement(\"option\",{value:6},\"6\"),/*#__PURE__*/React.createElement(\"option\",{value:9},\"9\"),/*#__PURE__*/React.createElement(\"option\",{value:12},\"12\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"button\",null,\"Request\")))));};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Loan));","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/LoanApplication.js"],"names":["React","useState","withRouter","connect","bindActionCreators","loanActions","mapStateToProps","errors","mapDispatchToProps","dispatch","actions","Loan","history","initialState","amount","tenor","loan","setLoan","showError","setShowError","handleChange","e","target","name","value","handleSubmit","preventDefault","userId","localStorage","getItem","loanObject","apply","applyLoan","application","push","window","location","reload"],"mappings":"82BAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,8BAA7B,CAGA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,UAAGC,CAAAA,MAAH,MAAGA,MAAH,OAAiB,CACrCA,MAAM,CAANA,MADqC,CAAjB,EAAxB,CAIA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACpCC,OAAO,CAAEN,kBAAkB,CAACC,WAAD,CAAcI,QAAd,CADS,CAAL,EAAnC,CAIA,GAAME,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,OAAkC,IAA/BJ,CAAAA,MAA+B,OAA/BA,MAA+B,CAAvBG,OAAuB,OAAvBA,OAAuB,CAAdE,OAAc,OAAdA,OAAc,CAC3C,GAAMC,CAAAA,YAAY,CAAG,CAAEC,MAAM,CAAE,GAAV,CAAeC,KAAK,CAAE,CAAtB,CAArB,CAD2C,cAErBd,QAAQ,CAACY,YAAD,CAFa,wCAEtCG,IAFsC,eAEhCC,OAFgC,8BAGXhB,QAAQ,CAAC,KAAD,CAHG,yCAGtCiB,SAHsC,eAG3BC,YAH2B,eAK3C,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,eACEA,CAAC,CAACC,MADJ,CACdC,IADc,WACdA,IADc,CACRC,KADQ,WACRA,KADQ,CAEtBP,OAAO,gCAAMD,IAAN,wBAAaO,IAAb,CAAoBC,KAApB,GAAP,CACH,CAHD,CAKA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAJ,CAAC,CAAI,CACtBA,CAAC,CAACK,cAAF,GACA,GAAMC,CAAAA,MAAM,CAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAf,CACA,GAAMC,CAAAA,UAAU,CAAG,CACfhB,MAAM,CAAEE,IAAI,CAACF,MADE,CAEfC,KAAK,CAAEC,IAAI,CAACD,KAFG,CAGfY,MAAM,CAAEA,MAHO,CAAnB,CAMF,GAAMI,CAAAA,KAAK,2FAAG,yKACcrB,CAAAA,OAAO,CAACsB,SAAR,CAAkBF,UAAlB,CADd,QACNG,WADM,mBAERA,WAAW,CAACjB,IAFJ,yBAGVJ,OAAO,CAACsB,IAAR,CAAa,cAAb,EAHU,gCAIHC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAJG,SAMZlB,YAAY,CAAC,IAAD,CAAZ,CANY,sDAAH,kBAALY,CAAAA,KAAK,2CAAX,CAQAA,KAAK,GAEN,CAnBD,CAoBA,mBACE,qDACE,2BAAK,SAAS,CAAC,WAAf,eACE,+CACE,iDADF,CADF,cAIE,2BAAK,SAAS,CAAC,OAAf,EAAwBb,SAAS,EAAIX,MAArC,CAJF,cAKE,4BAAM,QAAQ,CAAEkB,YAAhB,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,6BAAO,OAAO,CAAC,QAAf,WADF,cAEE,6BACE,IAAI,CAAC,OADP,CAEE,GAAG,CAAC,KAFN,CAGE,GAAG,CAAC,OAHN,CAIE,IAAI,CAAC,KAJP,CAKE,EAAE,CAAC,QALL,CAME,IAAI,CAAC,QANP,CAOE,KAAK,CAAET,IAAI,CAACF,MAPd,CAQE,QAAQ,CAAEM,YARZ,EAFF,cAYE,kCAAS,QAAUJ,IAAI,CAACF,MAAxB,CAZF,CADF,cAeE,2BAAK,SAAS,CAAC,UAAf,eACE,6BAAO,OAAO,CAAC,OAAf,qBADF,cAEE,8BACE,EAAE,CAAC,QADL,CAEE,EAAE,CAAC,OAFL,CAGE,IAAI,CAAC,OAHP,CAIE,KAAK,CAAEE,IAAI,CAACD,KAJd,CAKE,QAAQ,CAAEK,YALZ,eAOE,8BAAQ,KAAK,CAAE,CAAf,MAPF,cAQE,8BAAQ,KAAK,CAAE,CAAf,MARF,cASE,8BAAQ,KAAK,CAAE,CAAf,MATF,cAUE,8BAAQ,KAAK,CAAE,CAAf,MAVF,cAWE,8BAAQ,KAAK,CAAE,EAAf,OAXF,CAFF,CAfF,cA+BE,2BAAK,SAAS,CAAC,UAAf,eACE,4CADF,CA/BF,CALF,CADF,CADF,CA6CH,CA3ED,CA6EA,cAAelB,CAAAA,UAAU,CAACC,OAAO,CAACG,eAAD,CAAkBE,kBAAlB,CAAP,CAA6CG,IAA7C,CAAD,CAAzB","sourcesContent":["import React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../redux/actions/loanActions';\n\n\nconst mapStateToProps = ({ errors }) => ({\n    errors\n});\n\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(loanActions, dispatch)\n});\n\nconst Loan = ({ errors, actions, history }) => {\n    const initialState = { amount: 500, tenor: 1 };\n  const [loan, setLoan] = useState(initialState);\n  const [showError, setShowError] = useState(false);\n\n    const handleChange = e => {\n        const { name, value } = e.target;\n        setLoan({ ...loan, [name]: value });\n    }\n\n    const handleSubmit = e => {\n        e.preventDefault();\n        const userId = localStorage.getItem('userId');\n        const loanObject = {\n            amount: loan.amount,\n            tenor: loan.tenor,\n            userId: userId\n        }\n      \n      const apply = async () => {\n        const application = await actions.applyLoan(loanObject);\n        if (application.loan) {\n          history.push('/loanDetails')\n          return window.location.reload();\n        }\n        setShowError(true)\n      }\n      apply();\n\n    }\n    return (\n      <>\n        <div className=\"loan-form\">\n          <header>\n            <h1>Apply for a loan</h1>\n          </header>\n          <div className='error'>{showError && errors}</div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-row\">\n              <label htmlFor=\"amount\">Amount</label>\n              <input\n                type=\"range\"\n                min=\"500\"\n                max=\"50000\"\n                step=\"500\"\n                id=\"amount\"\n                name=\"amount\"\n                value={loan.amount}\n                onChange={handleChange}\n              />\n              <output>{\"ksh. \" + loan.amount}</output>\n            </div>\n            <div className=\"form-row\">\n              <label htmlFor=\"tenor\">Period In Months</label>\n              <select\n                as=\"select\"\n                id=\"tenor\"\n                name=\"tenor\"\n                value={loan.tenor}\n                onChange={handleChange}\n              >\n                <option value={1}>1</option>\n                <option value={3}>3</option>\n                <option value={6}>6</option>\n                <option value={9}>9</option>\n                <option value={12}>12</option>\n              </select>\n            </div>\n            <div className=\"form-row\">\n              <button>Request</button>\n            </div>\n          </form>\n        </div>\n      </>\n    );\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Loan));"]},"metadata":{},"sourceType":"module"}