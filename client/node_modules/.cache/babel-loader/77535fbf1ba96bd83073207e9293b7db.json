{"ast":null,"code":"import*as userApi from'../../api/userApi';import*as types from'./actionTypes';export var receiveErrors=function receiveErrors(error){return{type:types.RECEIVE_ERRORS,error:error.error};};export var signUpUserSuccess=function signUpUserSuccess(user){return{type:types.SIGN_UP_USER_SUCCESS,user:user.data};};export var signInUserSuccess=function signInUserSuccess(user){return{type:types.SIGN_IN_USER_SUCCESS,user:user.data};};export var loadUsersSuccess=function loadUsersSuccess(users){return{type:types.LOAD_USERS_SUCCESS,users:users.data};};export var loadUserSuccess=function loadUserSuccess(user){return{type:types.LOAD_USER_SUCCESS,user:user.data};};export var verifyUserSuccess=function verifyUserSuccess(user){return{type:types.VERIFY_USER_SUCCESS,user:user.data};};export function loadUsers(){return function(dispatch){return userApi.loadUsers().then(function(users){if(users.data)return dispatch(loadUsersSuccess(users));return dispatch(receiveErrors(users));});};};export function loadUser(){return function(dispatch){return userApi.loadUser().then(function(user){if(user.data)return dispatch(loadUserSuccess(user));return dispatch(receiveErrors(user));});};};export function verifyUser(){return function(dispatch){return userApi.verifyUser().then(function(user){if(user.data){alert('You have successfully verified your account');return dispatch(verifyUserSuccess(user));}alert('There was a problem: '+user.error);return dispatch(receiveErrors(user));});};};export function signup(user){return function(dispatch){return userApi.signup(user).then(function(user){if(user.data){localStorage.setItem('verificationToken',user.data.verificationToken);localStorage.setItem('email',user.data.email);alert('Check mail to verify your account');return dispatch(signInUserSuccess(user));}return dispatch(receiveErrors(user));});};};export var signin=function signin(user){return function(dispatch){return userApi.signin(user).then(function(user){if(user.data){if(user.data.loan[0]){localStorage.setItem('token',user.data.token);localStorage.setItem('username',user.data.username);localStorage.setItem('userId',user.data.userId);localStorage.setItem('user',user.data.admin);localStorage.setItem('userStatus',user.data.status);localStorage.setItem('loanStatus',user.data.loan[0].status);localStorage.setItem('loanId',user.data.loan[0]._id);return dispatch(signInUserSuccess(user));}else{localStorage.setItem('token',user.data.token);localStorage.setItem('username',user.data.username);localStorage.setItem('userId',user.data.userId);localStorage.setItem('user',user.data.admin);localStorage.setItem('userStatus',user.data.status);localStorage.setItem('loanStatus','No loan');return dispatch(signInUserSuccess(user));}}return dispatch(receiveErrors(user));});};};","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/redux/actions/userActions.js"],"names":["userApi","types","receiveErrors","error","type","RECEIVE_ERRORS","signUpUserSuccess","user","SIGN_UP_USER_SUCCESS","data","signInUserSuccess","SIGN_IN_USER_SUCCESS","loadUsersSuccess","users","LOAD_USERS_SUCCESS","loadUserSuccess","LOAD_USER_SUCCESS","verifyUserSuccess","VERIFY_USER_SUCCESS","loadUsers","dispatch","then","loadUser","verifyUser","alert","signup","localStorage","setItem","verificationToken","email","signin","loan","token","username","userId","admin","status","_id"],"mappings":"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","sourcesContent":["import * as userApi from '../../api/userApi';\nimport * as types from './actionTypes';\n\nexport const receiveErrors = error => (\n    { type: types.RECEIVE_ERRORS, error: error.error }\n);\n\nexport const signUpUserSuccess = user => (\n    { type: types.SIGN_UP_USER_SUCCESS, user: user.data }\n);\n\nexport const signInUserSuccess = user => (\n    { type: types.SIGN_IN_USER_SUCCESS, user: user.data }\n);\n\nexport const loadUsersSuccess = users => (\n    { type: types.LOAD_USERS_SUCCESS, users: users.data }\n);\n\nexport const loadUserSuccess = user => (\n    { type: types.LOAD_USER_SUCCESS, user: user.data }\n);\n\nexport const verifyUserSuccess = user => (\n    { type: types.VERIFY_USER_SUCCESS, user: user.data }\n);\n\nexport function loadUsers() {\n    return function (dispatch) {\n        return userApi.loadUsers()\n            .then(users => {\n                if (users.data) return dispatch(loadUsersSuccess(users))\n                return dispatch(receiveErrors(users))\n            })\n    };\n};\n\nexport function loadUser() {\n    return function (dispatch) {\n        return userApi.loadUser()\n            .then(user => {\n                if (user.data) return dispatch(loadUserSuccess(user))\n                return dispatch(receiveErrors(user))\n            })\n    };\n};\n\nexport function verifyUser() {\n    return function (dispatch) {\n        return userApi.verifyUser()\n            .then(user => {\n                if (user.data) {\n                    alert('You have successfully verified your account')\n                    return dispatch(verifyUserSuccess(user))\n                }\n                alert('There was a problem: ' + user.error)\n                return dispatch(receiveErrors(user))\n            })\n    };\n};\n\nexport function signup(user) {\n    return function (dispatch) {\n        return userApi.signup(user)\n            .then(user => {\n                if (user.data) {\n                    localStorage.setItem('verificationToken', user.data.verificationToken);\n                    localStorage.setItem('email', user.data.email);\n                    alert('Check mail to verify your account')\n                    return dispatch(signInUserSuccess(user))\n                }\n                return dispatch(receiveErrors(user))\n            })\n    };\n};\n\nexport const signin = user => dispatch => userApi.signin(user)\n    .then(user => {\n        if (user.data) {\n            if (user.data.loan[0]) {\n                localStorage.setItem('token', user.data.token)\n                localStorage.setItem('username', user.data.username)\n                localStorage.setItem('userId', user.data.userId)\n                localStorage.setItem('user', user.data.admin)\n                localStorage.setItem('userStatus', user.data.status)\n                localStorage.setItem('loanStatus', user.data.loan[0].status)\n                localStorage.setItem('loanId', user.data.loan[0]._id)\n                return dispatch(signInUserSuccess(user))\n            } else {\n                localStorage.setItem('token', user.data.token)\n                localStorage.setItem('username', user.data.username)\n                localStorage.setItem('userId', user.data.userId)\n                localStorage.setItem('user', user.data.admin)\n                localStorage.setItem('userStatus', user.data.status)\n                localStorage.setItem('loanStatus', 'No loan')\n                return dispatch(signInUserSuccess(user))\n            }\n        }\n        return dispatch(receiveErrors(user))\n    })\n\n\n"]},"metadata":{},"sourceType":"module"}