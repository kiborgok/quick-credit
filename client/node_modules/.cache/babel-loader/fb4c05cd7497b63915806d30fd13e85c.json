{"ast":null,"code":"import * as userApi from '../../api/userApi';\nimport * as types from './actionTypes';\nexport const receiveErrors = error => ({\n  type: types.RECEIVE_ERRORS,\n  error: error.error\n});\nexport const clearErrors = () => ({\n  type: types.CLEAR_ERRORS\n});\nexport const signUpUserSuccess = user => ({\n  type: types.SIGN_UP_USER_SUCCESS,\n  user: user.data\n});\nexport const signInUserSuccess = user => ({\n  type: types.SIGN_IN_USER_SUCCESS,\n  user: user.data\n});\nexport const loadUsersSuccess = users => ({\n  type: types.LOAD_USERS_SUCCESS,\n  users: users.data\n});\nexport const loadUserSuccess = user => ({\n  type: types.LOAD_USER_SUCCESS,\n  user: user.data\n});\nexport const verifyUserSuccess = user => ({\n  type: types.VERIFY_USER_SUCCESS,\n  user: user.data\n});\nexport function loadUsers() {\n  return function (dispatch) {\n    return userApi.loadUsers().then(users => {\n      if (users.data) return dispatch(loadUsersSuccess(users));\n      return dispatch(receiveErrors(users));\n    }).catch(error => {\n      alert(`Network Error ${error}`);\n    });\n  };\n}\n;\nexport function loadUser() {\n  return function (dispatch) {\n    return userApi.loadUser().then(user => {\n      if (user.data) return dispatch(loadUserSuccess(user));\n      return dispatch(receiveErrors(user));\n    }).catch(error => {\n      alert(`Network Error ${error}`);\n    });\n  };\n}\n;\nexport function verifyUser() {\n  return function (dispatch) {\n    return userApi.verifyUser().then(user => {\n      if (user.data) {\n        alert('You have successfully verified your account');\n        localStorage.removeItem('verificationToken');\n        localStorage.removeItem('email');\n        return dispatch(verifyUserSuccess(user));\n      }\n\n      alert('There was a problem ' + user.error);\n      return dispatch(receiveErrors(user));\n    }).catch(error => {\n      alert(`Network Error ${error}`);\n    });\n  };\n}\n;\nexport function signup(user) {\n  return function (dispatch) {\n    return userApi.signup(user).then(user => {\n      if (user.data) {\n        localStorage.setItem('verificationToken', user.data.verificationToken);\n        localStorage.setItem('email', user.data.email);\n        alert('Check mail to verify your account');\n        return dispatch(signInUserSuccess(user));\n      }\n\n      return dispatch(receiveErrors(user));\n    }).catch(error => {\n      alert(`Network Error ${error}`);\n    });\n  };\n}\n;\nexport const signin = user => dispatch => userApi.signin(user).then(user => {\n  if (user.data) {\n    if (user.data.loan[0]) {\n      localStorage.setItem('token', user.data.token);\n      localStorage.setItem('username', user.data.username);\n      localStorage.setItem('userId', user.data.userId);\n      localStorage.setItem('user', user.data.admin);\n      localStorage.setItem('userStatus', user.data.status);\n      localStorage.setItem('loanStatus', user.data.loan[0].status);\n      localStorage.setItem('loanId', user.data.loan[0]._id);\n      return dispatch(signInUserSuccess(user));\n    } else {\n      localStorage.setItem('token', user.data.token);\n      localStorage.setItem('username', user.data.username);\n      localStorage.setItem('userId', user.data.userId);\n      localStorage.setItem('user', user.data.admin);\n      localStorage.setItem('userStatus', user.data.status);\n      localStorage.setItem('loanStatus', 'No loan');\n      return dispatch(signInUserSuccess(user));\n    }\n  }\n\n  return dispatch(receiveErrors(user));\n}).catch(error => {\n  alert(`Network Error ${error}`);\n});","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/redux/actions/userActions.js"],"names":["userApi","types","receiveErrors","error","type","RECEIVE_ERRORS","clearErrors","CLEAR_ERRORS","signUpUserSuccess","user","SIGN_UP_USER_SUCCESS","data","signInUserSuccess","SIGN_IN_USER_SUCCESS","loadUsersSuccess","users","LOAD_USERS_SUCCESS","loadUserSuccess","LOAD_USER_SUCCESS","verifyUserSuccess","VERIFY_USER_SUCCESS","loadUsers","dispatch","then","catch","alert","loadUser","verifyUser","localStorage","removeItem","signup","setItem","verificationToken","email","signin","loan","token","username","userId","admin","status","_id"],"mappings":"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","sourcesContent":["import * as userApi from '../../api/userApi';\nimport * as types from './actionTypes';\n\nexport const receiveErrors = error => (\n    { type: types.RECEIVE_ERRORS, error: error.error }\n);\n\nexport const clearErrors = () => (\n    { type: types.CLEAR_ERRORS,  }\n);\n\nexport const signUpUserSuccess = user => (\n    { type: types.SIGN_UP_USER_SUCCESS, user: user.data }\n);\n\nexport const signInUserSuccess = user => (\n    { type: types.SIGN_IN_USER_SUCCESS, user: user.data }\n);\n\nexport const loadUsersSuccess = users => (\n    { type: types.LOAD_USERS_SUCCESS, users: users.data }\n);\n\nexport const loadUserSuccess = user => (\n    { type: types.LOAD_USER_SUCCESS, user: user.data }\n);\n\nexport const verifyUserSuccess = user => (\n    { type: types.VERIFY_USER_SUCCESS, user: user.data }\n);\n\nexport function loadUsers() {\n    return function (dispatch) {\n        return userApi.loadUsers()\n            .then(users => {\n                if (users.data) return dispatch(loadUsersSuccess(users))\n                return dispatch(receiveErrors(users))\n            })\n            .catch(error => {\n                alert(`Network Error ${error}`)\n            })\n    };\n};\n\nexport function loadUser() {\n    return function (dispatch) {\n        return userApi.loadUser()\n            .then(user => {\n                if (user.data) return dispatch(loadUserSuccess(user))\n                return dispatch(receiveErrors(user))\n            })\n            .catch(error => {\n                alert(`Network Error ${error}`)\n            })\n    };\n};\n\nexport function verifyUser() {\n    return function (dispatch) {\n        return userApi.verifyUser()\n            .then(user => {\n                if (user.data) {\n                    alert('You have successfully verified your account')\n                    localStorage.removeItem('verificationToken')\n                    localStorage.removeItem('email')\n                    return dispatch(verifyUserSuccess(user))\n                }\n                alert('There was a problem ' + user.error)\n                return dispatch(receiveErrors(user))\n            })\n            .catch(error => {\n                alert(`Network Error ${error}`)\n            })\n    };\n};\n\nexport function signup(user) {\n    return function (dispatch) {\n        return userApi.signup(user)\n            .then(user => {\n                if (user.data) {\n                    localStorage.setItem('verificationToken', user.data.verificationToken);\n                    localStorage.setItem('email', user.data.email);\n                    alert('Check mail to verify your account')\n                    return dispatch(signInUserSuccess(user))\n                }\n                return dispatch(receiveErrors(user))\n            })\n            .catch(error => {\n                alert(`Network Error ${error}`)\n            })\n    };\n};\n\nexport const signin = user => dispatch => userApi.signin(user)\n    .then(user => {\n        if (user.data) {\n            if (user.data.loan[0]) {\n                localStorage.setItem('token', user.data.token)\n                localStorage.setItem('username', user.data.username)\n                localStorage.setItem('userId', user.data.userId)\n                localStorage.setItem('user', user.data.admin)\n                localStorage.setItem('userStatus', user.data.status)\n                localStorage.setItem('loanStatus', user.data.loan[0].status)\n                localStorage.setItem('loanId', user.data.loan[0]._id)\n                return dispatch(signInUserSuccess(user))\n            } else {\n                localStorage.setItem('token', user.data.token)\n                localStorage.setItem('username', user.data.username)\n                localStorage.setItem('userId', user.data.userId)\n                localStorage.setItem('user', user.data.admin)\n                localStorage.setItem('userStatus', user.data.status)\n                localStorage.setItem('loanStatus', 'No loan')\n                return dispatch(signInUserSuccess(user))\n            }\n        }\n        return dispatch(receiveErrors(user))\n    })\n    .catch(error => {\n        alert(`Network Error ${error}`)\n    })\n\n\n"]},"metadata":{},"sourceType":"module"}