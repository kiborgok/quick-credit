{"ast":null,"code":"import _slicedToArray from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{withRouter}from'react-router-dom';import{connect}from\"react-redux\";import{bindActionCreators}from'redux';import*as loanActions from'../../redux/actions/loanActions';var mapStateToProps=function mapStateToProps(_ref){var errors=_ref.errors,loans=_ref.loans;return{errors:errors,loans:loans};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{actions:{loadLoans:bindActionCreators(loanActions.loadLoans,dispatch),approveOrRejectLoan:bindActionCreators(loanActions.approveOrRejectLoan,dispatch)}};};var Modal=function Modal(_ref2){var handleClose=_ref2.handleClose,show=_ref2.show,loan=_ref2.loan;return/*#__PURE__*/React.createElement(\"div\",{className:show?'modal display-block':'modal display-none'},/*#__PURE__*/React.createElement(\"section\",{className:\"modal-main\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Loan Details\"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Amount: \",loan.amount),/*#__PURE__*/React.createElement(\"h2\",null,\"Tenor: \",loan.tenor),/*#__PURE__*/React.createElement(\"h2\",null,\"Interest: \",loan.interest),/*#__PURE__*/React.createElement(\"h2\",null,\"monthlyInstallment: \",loan.monthlyInstallment),/*#__PURE__*/React.createElement(\"h2\",null,\"Balance: \",loan.balance),/*#__PURE__*/React.createElement(\"h2\",null,\"Repaid: \",loan.repaid===true?'True':'False'),/*#__PURE__*/React.createElement(\"h2\",null,\"Status: \",loan.status)),/*#__PURE__*/React.createElement(\"div\",{style:{position:'fixed',right:'0',top:'0',color:'red',fontWeight:'bold',fontSize:'1.5em',marginRight:'15px',marginTop:'15px'},onClick:handleClose},\"X\")));};var LoanApplications=function LoanApplications(_ref3){var errors=_ref3.errors,loans=_ref3.loans,actions=_ref3.actions;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),show=_useState2[0],setShow=_useState2[1];var _useState3=useState({amount:null,tenor:null,repaid:null,balance:null,interest:null,status:null,monthlyInstallment:null}),_useState4=_slicedToArray(_useState3,2),loanDetails=_useState4[0],setLoanDetails=_useState4[1];var showModal=function showModal(){return setShow(true);};var hideModal=function hideModal(){return setShow(false);};useEffect(function(){loans.length===0&&actions.loadLoans();});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"data-form\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Loans\")),/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},errors),/*#__PURE__*/React.createElement(\"table\",null,/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"First Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Second Name\"),/*#__PURE__*/React.createElement(\"th\",null,\"Email\"),/*#__PURE__*/React.createElement(\"th\",null,\"Amount\"),/*#__PURE__*/React.createElement(\"th\",null,\"Period In Months\"),/*#__PURE__*/React.createElement(\"th\",null,\"Balance\"),/*#__PURE__*/React.createElement(\"th\",null,\"Status\"),/*#__PURE__*/React.createElement(\"th\",null,\"View Loan\"))),loans.length!==0?/*#__PURE__*/React.createElement(\"tbody\",null,loans.map(function(loan){return/*#__PURE__*/React.createElement(\"tr\",{key:loan._id},/*#__PURE__*/React.createElement(\"td\",null,loan.user.firstName),/*#__PURE__*/React.createElement(\"td\",null,loan.user.secondName),/*#__PURE__*/React.createElement(\"td\",null,loan.user.email),/*#__PURE__*/React.createElement(\"td\",null,loan.amount),/*#__PURE__*/React.createElement(\"td\",null,loan.tenor),/*#__PURE__*/React.createElement(\"td\",null,loan.balance),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){loan.status===\"Rejected\"?actions.approveOrRejectLoan({status:\"Approved\",loanId:loan._id}):actions.approveOrRejectLoan({status:\"Rejected\",loanId:loan._id});},className:loan.status===\"Pending\"?\"pending\":loan.status===\"Approved\"?\"approved\":\"unverified\"},loan.status)),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Modal,{show:show,loan:loanDetails,handleClose:hideModal}),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){setLoanDetails({amount:loan.amount,tenor:loan.tenor,repaid:loan.repaid,balance:loan.balance,interest:loan.interest,status:loan.status,monthlyInstallment:loan.paymentInstallment});showModal();}},\"View\")));})):/*#__PURE__*/React.createElement(\"caption\",null,\"There are no loans yet\"))));};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(LoanApplications));","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/admin/LoanApplications.js"],"names":["React","useEffect","useState","withRouter","connect","bindActionCreators","loanActions","mapStateToProps","errors","loans","mapDispatchToProps","dispatch","actions","loadLoans","approveOrRejectLoan","Modal","handleClose","show","loan","amount","tenor","interest","monthlyInstallment","balance","repaid","status","position","right","top","color","fontWeight","fontSize","marginRight","marginTop","LoanApplications","setShow","loanDetails","setLoanDetails","showModal","hideModal","length","map","_id","user","firstName","secondName","email","loanId","paymentInstallment"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../../redux/actions/loanActions';\n\nconst mapStateToProps = ({ errors, loans }) => ({\n    errors, loans\n});\n\nconst mapDispatchToProps = dispatch => ({\n    actions: {\n        loadLoans: bindActionCreators(loanActions.loadLoans, dispatch),\n        approveOrRejectLoan: bindActionCreators(loanActions.approveOrRejectLoan, dispatch)\n    }\n});\n\nconst Modal = ({ handleClose, show, loan }) => (\n    <div className={show ? 'modal display-block' : 'modal display-none'}>\n        <section className='modal-main'>\n            <h2>Loan Details</h2>\n            <div>\n                <h2>Amount: {loan.amount}</h2>\n                <h2>Tenor: {loan.tenor}</h2>\n                <h2>Interest: {loan.interest}</h2>\n                <h2>monthlyInstallment: {loan.monthlyInstallment}</h2>\n                <h2>Balance: {loan.balance}</h2>\n                <h2>Repaid: {loan.repaid === true ? 'True' : 'False'}</h2>\n                <h2>Status: {loan.status}</h2>\n            </div>\n            <div\n                style={{\n                    position: 'fixed', right: '0', top: '0', color: 'red', fontWeight: 'bold', fontSize: '1.5em', marginRight: '15px', marginTop: '15px'\n                }}\n                onClick={handleClose}>\n                X\n            </div>\n        </section>\n    </div>\n)\n\nconst LoanApplications = ({ errors, loans, actions }) => {\n    const [show, setShow] = useState(false);\n    const [loanDetails, setLoanDetails] = useState({\n        amount: null,\n        tenor: null,\n        repaid: null,\n        balance: null,\n        interest: null,\n        status: null,\n        monthlyInstallment: null\n    });\n    const showModal = () => setShow(true)\n    const hideModal = () => setShow(false)\n    useEffect(() => {\n        (loans.length === 0) && actions.loadLoans()\n    });\n    return (\n      <>\n        <div className=\"data-form\">\n          <header>\n            <h1>Loans</h1>\n          </header>\n          <p className='error'>{errors}</p>\n            <table>\n              <thead>\n                <tr>\n                  <th>First Name</th>\n                  <th>Second Name</th>\n                  <th>Email</th>\n                  <th>Amount</th>\n                  <th>Period In Months</th>\n                  <th>Balance</th>\n                  <th>Status</th>\n                  <th>View Loan</th>\n                </tr>\n            </thead>\n            {loans.length !== 0 ? (\n              <tbody>\n                {loans.map((loan) => (\n                  <tr key={loan._id}>\n                    <td>{loan.user.firstName}</td>\n                    <td>{loan.user.secondName}</td>\n                    <td>{loan.user.email}</td>\n                    <td>{loan.amount}</td>\n                    <td>{loan.tenor}</td>\n                    <td>{loan.balance}</td>\n                    <td>\n                      <button\n                        onClick={() => {\n                          loan.status === \"Rejected\"\n                            ? actions.approveOrRejectLoan({\n                                status: \"Approved\",\n                                loanId: loan._id,\n                              })\n                            : actions.approveOrRejectLoan({\n                                status: \"Rejected\",\n                                loanId: loan._id,\n                              });\n                        }}\n                        className={\n                          loan.status === \"Pending\"\n                            ? \"pending\"\n                            : loan.status === \"Approved\"\n                            ? \"approved\"\n                            : \"unverified\"\n                        }\n                      >\n                        {loan.status}\n                      </button>\n                    </td>\n                    <td>\n                      <Modal\n                        show={show}\n                        loan={loanDetails}\n                        handleClose={hideModal}\n                      />\n                      <button\n                        onClick={() => {\n                          setLoanDetails({\n                            amount: loan.amount,\n                            tenor: loan.tenor,\n                            repaid: loan.repaid,\n                            balance: loan.balance,\n                            interest: loan.interest,\n                            status: loan.status,\n                            monthlyInstallment: loan.paymentInstallment,\n                          });\n                          showModal();\n                        }}\n                      >\n                        View\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n                </tbody>) : (\n                \n                  <caption>There are no loans yet</caption>\n              )}\n            </table>\n        </div>\n      </>\n    );\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoanApplications));"]},"metadata":{},"sourceType":"module"}