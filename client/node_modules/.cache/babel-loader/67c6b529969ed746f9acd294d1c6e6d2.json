{"ast":null,"code":"import _regeneratorRuntime from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{withRouter}from'react-router-dom';import{connect}from\"react-redux\";import{bindActionCreators}from'redux';import*as loanActions from'../redux/actions/loanActions';var mapStateToProps=function mapStateToProps(_ref){var errors=_ref.errors;return{errors:errors};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{actions:bindActionCreators(loanActions,dispatch)};};var LoanPayment=function LoanPayment(_ref2){var actions=_ref2.actions,errors=_ref2.errors,history=_ref2.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showError=_useState2[0],setShowError=_useState2[1];var _useState3=useState(50),_useState4=_slicedToArray(_useState3,2),amount=_useState4[0],setAmount=_useState4[1];var id=localStorage.getItem('loanId');var handleChange=function handleChange(e){setAmount(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();var pay=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var payment;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return actions.repayLoan({repaymentAmount:amount,loanId:id});case 2:payment=_context.sent;if(!payment.loan){_context.next=6;break;}history.push('/loanRepaymentHistory');return _context.abrupt(\"return\",window.location.reload());case 6:setShowError(true);case 7:case\"end\":return _context.stop();}}},_callee);}));return function pay(){return _ref3.apply(this,arguments);};}();pay();};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"loan-form\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Repay loan\")),/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},showError&&errors),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"amount\"},\"Amount\"),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",min:\"50\",max:\"55000\",id:\"amount\",name:\"amount\",value:amount,onChange:handleChange}),/*#__PURE__*/React.createElement(\"output\",null,\"ksh. \"+amount)),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"button\",null,\"Repay\")))));};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(LoanPayment));","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/LoanPayment.js"],"names":["React","useState","withRouter","connect","bindActionCreators","loanActions","mapStateToProps","errors","mapDispatchToProps","dispatch","actions","LoanPayment","history","showError","setShowError","amount","setAmount","id","localStorage","getItem","handleChange","e","target","value","handleSubmit","preventDefault","pay","repayLoan","repaymentAmount","loanId","payment","loan","push","window","location","reload"],"mappings":"6gBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,kBAAT,KAAmC,OAAnC,CACA,MAAO,GAAKC,CAAAA,WAAZ,KAA6B,8BAA7B,CAEA,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,UAAGC,CAAAA,MAAH,MAAGA,MAAH,OAAiB,CAAEA,MAAM,CAANA,MAAF,CAAjB,EAAxB,CACA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,QAAK,CACpCC,OAAO,CAAEN,kBAAkB,CAACC,WAAD,CAAcI,QAAd,CADS,CAAL,EAAnC,CAIA,GAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,OAAkC,IAA/BD,CAAAA,OAA+B,OAA/BA,OAA+B,CAAtBH,MAAsB,OAAtBA,MAAsB,CAAdK,OAAc,OAAdA,OAAc,eAClBX,QAAQ,CAAC,KAAD,CADU,wCAC7CY,SAD6C,eAClCC,YADkC,8BAEtBb,QAAQ,CAAC,EAAD,CAFc,yCAE3Cc,MAF2C,eAEnCC,SAFmC,eAGlD,GAAMC,CAAAA,EAAE,CAAGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAX,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,CAAC,CAAI,CACtBL,SAAS,CAACK,CAAC,CAACC,MAAF,CAASC,KAAV,CAAT,CACH,CAFD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAH,CAAC,CAAI,CACtBA,CAAC,CAACI,cAAF,GACF,GAAMC,CAAAA,GAAG,2FAAG,qKACYhB,CAAAA,OAAO,CAACiB,SAAR,CAAkB,CAAEC,eAAe,CAAEb,MAAnB,CAA2Bc,MAAM,CAAEZ,EAAnC,CAAlB,CADZ,QACJa,OADI,mBAENA,OAAO,CAACC,IAFF,yBAGRnB,OAAO,CAACoB,IAAR,CAAa,uBAAb,EAHQ,gCAIDC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EAJC,SAMVrB,YAAY,CAAC,IAAD,CAAZ,CANU,sDAAH,kBAAHY,CAAAA,GAAG,2CAAT,CAQAA,GAAG,GACJ,CAXD,CAYA,mBACE,qDACE,2BAAK,SAAS,CAAC,WAAf,eACE,+CACE,2CADF,CADF,cAIE,2BAAK,SAAS,CAAC,OAAf,EAAwBb,SAAS,EAAIN,MAArC,CAJF,cAKE,4BAAM,QAAQ,CAAEiB,YAAhB,eACE,2BAAK,SAAS,CAAC,UAAf,eACE,6BAAO,OAAO,CAAC,QAAf,WADF,cAEE,6BACE,IAAI,CAAC,QADP,CAEE,GAAG,CAAC,IAFN,CAGE,GAAG,CAAC,OAHN,CAIE,EAAE,CAAC,QAJL,CAKE,IAAI,CAAC,QALP,CAME,KAAK,CAAET,MANT,CAOE,QAAQ,CAAEK,YAPZ,EAFF,cAWE,kCAAS,QAAUL,MAAnB,CAXF,CADF,cAcE,2BAAK,SAAS,CAAC,UAAf,eACE,0CADF,CAdF,CALF,CADF,CADF,CA4BH,CAjDD,CAmDA,cAAeb,CAAAA,UAAU,CAACC,OAAO,CAACG,eAAD,CAAkBE,kBAAlB,CAAP,CAA6CG,WAA7C,CAAD,CAAzB","sourcesContent":["import React, { useState } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as loanActions from '../redux/actions/loanActions';\n\nconst mapStateToProps = ({ errors }) => ({ errors });\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(loanActions, dispatch)\n});\n\nconst LoanPayment = ({ actions, errors, history }) => {\n  const [showError, setShowError] = useState(false);\n    const [amount, setAmount] = useState(50);\n    const id = localStorage.getItem('loanId')\n\n    const handleChange = e => {\n        setAmount(e.target.value);\n    }\n\n    const handleSubmit = e => {\n        e.preventDefault()\n      const pay = async () => {\n        const payment = await actions.repayLoan({ repaymentAmount: amount, loanId: id })\n        if (payment.loan) {\n          history.push('/loanRepaymentHistory')\n          return window.location.reload();\n        }\n        setShowError(true)\n      }\n      pay();\n    }\n    return (\n      <>\n        <div className=\"loan-form\">\n          <header>\n            <h1>Repay loan</h1>\n          </header>\n          <div className='error'>{showError && errors}</div>\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-row\">\n              <label htmlFor=\"amount\">Amount</label>\n              <input\n                type=\"number\"\n                min=\"50\"\n                max=\"55000\"\n                id=\"amount\"\n                name=\"amount\"\n                value={amount}\n                onChange={handleChange}\n              />\n              <output>{\"ksh. \" + amount}</output>\n            </div>\n            <div className=\"form-row\">\n              <button>Repay</button>\n            </div>\n          </form>\n        </div>\n      </>\n    );\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(LoanPayment));"]},"metadata":{},"sourceType":"module"}