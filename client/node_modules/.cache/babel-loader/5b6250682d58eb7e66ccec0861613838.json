{"ast":null,"code":"import _regeneratorRuntime from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vanellope/Programming/Javascript/Quickloan/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{useFormik}from\"formik\";import*as Yup from\"yup\";import{Link}from'react-router-dom';import{withRouter}from'react-router-dom';import{connect}from\"react-redux\";import{bindActionCreators}from'redux';import*as userActions from'../redux/actions/userActions';var mapStateToProps=function mapStateToProps(_ref){var errors=_ref.errors;return{errors:errors};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{actions:bindActionCreators(userActions,dispatch)};};var Login=function Login(_ref2){var actions=_ref2.actions,errors=_ref2.errors,history=_ref2.history;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showError=_useState2[0],setShowError=_useState2[1];var formik=useFormik({initialValues:{email:\"\",password:\"\"},validationSchema:Yup.object({email:Yup.string().email(\"Invalid email address\").required(\"Required\"),password:Yup.string().required(\"Required\")}),onSubmit:function onSubmit(values){var user={email:values.email,password:values.password};var signUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var login;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return actions.signin(user);case 2:login=_context.sent;if(!login.user){_context.next=6;break;}history.push(\"/\");return _context.abrupt(\"return\",window.location.reload());case 6:setShowError(true);case 7:case\"end\":return _context.stop();}}},_callee);}));return function signUser(){return _ref3.apply(this,arguments);};}();signUser();}});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"login-form\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Sign In\")),/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},showError&&errors),/*#__PURE__*/React.createElement(\"form\",{onSubmit:formik.handleSubmit,noValidate:true},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",Object.assign({name:\"email\",type:\"email\"},formik.getFieldProps(\"email\"))),formik.touched.email&&formik.errors.email?/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},formik.errors.email):null),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",Object.assign({name:\"password\",type:\"password\"},formik.getFieldProps(\"password\"))),formik.touched.password&&formik.errors.password?/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},formik.errors.password):null),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\"},\"Sign In\"),/*#__PURE__*/React.createElement(\"p\",{style:{padding:\"4px\",marginLeft:\"3px\"}},\"Don't have an account\",\" \",/*#__PURE__*/React.createElement(Link,{style:{textDecoration:\"none\"},to:\"/signup\"},\"Signup\"))))));};export default withRouter(connect(mapStateToProps,mapDispatchToProps)(Login));","map":{"version":3,"sources":["/home/vanellope/Programming/Javascript/Quickloan/frontend/src/components/Login.js"],"names":["React","useState","useFormik","Yup","Link","withRouter","connect","bindActionCreators","userActions","mapStateToProps","errors","mapDispatchToProps","dispatch","actions","Login","history","showError","setShowError","formik","initialValues","email","password","validationSchema","object","string","required","onSubmit","values","user","signUser","signin","login","push","window","location","reload","handleSubmit","getFieldProps","touched","padding","marginLeft","textDecoration"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport { Link } from 'react-router-dom';\nimport { withRouter } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from 'redux';\nimport * as userActions from '../redux/actions/userActions';\n\nconst mapStateToProps = ({ errors }) => ({ errors });\nconst mapDispatchToProps = dispatch => ({\n    actions: bindActionCreators(userActions, dispatch)\n});\n\nconst Login = ({ actions, errors, history }) => {const [showError, setShowError] = useState(false);\n\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\",\n    },\n    validationSchema: Yup.object({\n      email: Yup.string()\n        .email(\"Invalid email address\")\n        .required(\"Required\"),\n      password: Yup.string()\n        .required(\"Required\"),\n    }),\n    onSubmit: (values) => {\n      const user = {\n        email: values.email,\n        password: values.password,\n      };\n      const signUser = async () => {\n        const login = await actions.signin(user);\n        if (login.user) {\n          history.push(\"/\");\n          return window.location.reload();\n        }\n        setShowError(true);\n      };\n      signUser();\n    },\n  });\n    return (\n      <>\n        <div className=\"login-form\">\n          <header>\n            <h1>Sign In</h1>\n          </header>\n          <div className='error'>{showError && errors}</div>\n          <form onSubmit={formik.handleSubmit} noValidate>\n            <div className=\"form-row\">\n              <label htmlFor=\"email\">Email</label>\n              <input\n                name=\"email\"\n                type=\"email\"\n                {...formik.getFieldProps(\"email\")}\n              />\n              {formik.touched.email && formik.errors.email ? (\n                <div className='error'>{formik.errors.email}</div>\n              ) : null}\n            </div>\n            <div className=\"form-row\">\n              <label htmlFor=\"password\">Password</label>\n              <input\n                name=\"password\"\n                type=\"password\"\n                {...formik.getFieldProps(\"password\")}\n              />\n              {formik.touched.password && formik.errors.password ? (\n                <div className='error'>{formik.errors.password}</div>\n              ) : null}\n            </div>\n            <div className=\"form-row\">\n              <button type='submit'>Sign In</button>\n              <p style={{ padding: \"4px\", marginLeft: \"3px\" }}>\n                Don't have an account{\" \"}\n                <Link style={{ textDecoration: \"none\" }} to=\"/signup\">\n                  Signup\n                </Link>\n              </p>\n            </div>\n          </form>\n        </div>\n      </>\n    );\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(Login));"]},"metadata":{},"sourceType":"module"}